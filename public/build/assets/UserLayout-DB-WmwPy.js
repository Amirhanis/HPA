import{i as k}from"./index-CJXH2dV6.js";import _ from"./Header-CIy7ySJT.js";import C from"./Footer-D5xW66Ir.js";import{j as c,r as M,o as s,b as r,e,F as f,l as j,n as h,t as z,d as v,g as B,m as A,v as H,Q as L,k as S,h as F,a as g,z as I}from"./app-B3Hywhcu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"fixed bottom-5 right-5 z-50"},N={key:0,class:"absolute bottom-20 right-0 w-80 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden flex flex-col",style:{height:"400px"}},$={class:"flex-1 p-4 overflow-y-auto bg-gray-50 space-y-3"},D={key:0,class:"flex justify-start"},T={class:"p-3 bg-white border-t border-gray-200"},U={__name:"ChatbotWidget",setup(w){const a=c(!1),n=M([{role:"assistant",content:"Salaam! I am your Halal Wellness Advisor. How can I help you today?"}]),i=c(""),d=c(!1),p=()=>{a.value=!a.value},b=async()=>{var t,o,l;if(!i.value.trim())return;const u=i.value;n.push({role:"user",content:u}),i.value="",d.value=!0;try{const m=((l=(o=(t=L().props.cart)==null?void 0:t.data)==null?void 0:o.items)==null?void 0:l.map(y=>y.product_id))||[],x=await S.post("/api/ai/chat",{message:u,cart_items:m});n.push({role:"assistant",content:x.data.response})}catch{n.push({role:"assistant",content:"Sorry, I am having trouble connecting to the server."})}finally{d.value=!1}};return(u,t)=>(s(),r("div",V,[e("button",{onClick:p,class:"bg-indigo-600 hover:bg-indigo-700 text-white rounded-full p-4 shadow-lg transition-transform transform hover:scale-110"},t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.159 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})],-1)])),a.value?(s(),r("div",N,[e("div",{class:"bg-indigo-600 p-4 text-white flex justify-between items-center"},[t[3]||(t[3]=e("h3",{class:"font-medium"},"Halal Advisor",-1)),e("button",{onClick:p,class:"text-indigo-200 hover:text-white"},t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",$,[(s(!0),r(f,null,j(n,(o,l)=>(s(),r("div",{key:l,class:h(["flex",o.role==="user"?"justify-end":"justify-start"])},[e("div",{class:h(["max-w-[80%] rounded-lg p-3 text-sm",o.role==="user"?"bg-indigo-600 text-white":"bg-white border border-gray-200 text-gray-800"])},z(o.content),3)],2))),128)),d.value?(s(),r("div",D,t[4]||(t[4]=[e("div",{class:"bg-white border border-gray-200 rounded-lg p-3 text-sm text-gray-500"}," Thinking... ",-1)]))):v("",!0)]),e("div",T,[e("form",{onSubmit:B(b,["prevent"]),class:"flex gap-2"},[A(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),type:"text",placeholder:"Ask about health...",class:"flex-1 border border-gray-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:border-indigo-500"},null,512),[[H,i.value]]),t[5]||(t[5]=e("button",{type:"submit",class:"bg-indigo-600 text-white rounded-full p-2 hover:bg-indigo-700"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})])],-1))],32)])])):v("",!0)]))}},G={__name:"UserLayout",setup(w){return F(()=>{k()}),(a,n)=>(s(),r(f,null,[g(_),I(a.$slots,"default"),g(U),g(C)],64))}};export{G as default};
