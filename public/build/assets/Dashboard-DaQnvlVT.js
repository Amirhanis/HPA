import{r as k,j as b,h as v,k as f,c as w,w as C,o,e as t,b as r,l as u,t as c,d as S,m as _,v as m,F as p,n as M,p as x}from"./app-B3Hywhcu.js";import V from"./AdminLayout-Mb_vuyQC.js";import"./index-CJXH2dV6.js";import"./Navbar-BRncRdpe.js";import"./Sidebar-6lvrDDnt.js";const A={class:"p-4"},T={class:"overflow-x-auto bg-white rounded-lg shadow"},U={class:"w-full text-sm text-left text-gray-600"},B={class:"px-4 py-3 font-medium text-gray-900"},D={class:"px-4 py-3"},O={class:"px-4 py-3"},P={class:"px-4 py-3"},F={key:0},L={class:"text-xs text-gray-500"},N={key:1,class:"text-gray-500 text-xs"},$={class:"px-4 py-3"},j=["onClick"],E={class:"px-4 py-3"},H={class:"flex gap-2 items-center"},z=["onUpdate:modelValue"],R=["onUpdate:modelValue"],q=["onClick"],G={id:"courier-codes"},J=["value"],K={class:"flex flex-wrap gap-2 mt-4"},Q=["href","innerHTML"],tt={__name:"Dashboard",props:{orders:Object},setup(d){const h=d,i=k({}),l=b([]);v(async()=>{var s;try{const a=await f.get(route("admin.couriers.index"));l.value=((s=a.data)==null?void 0:s.data)??[]}catch{l.value=[]}}),h.orders.data.forEach(s=>{var a,e;i[s.id]={tracking_number:((a=s.shipment)==null?void 0:a.tracking_number)??"",courier_code:((e=s.shipment)==null?void 0:e.courier_code)??""}});function y(s){x.post(route("admin.orders.shipment.store",s),{tracking_number:i[s].tracking_number,courier_code:i[s].courier_code},{preserveScroll:!0})}function g(s){confirm("Are you sure you want to mark this order as PAID?")&&x.post(route("admin.orders.mark_paid",s),{},{preserveScroll:!0,onSuccess:()=>alert("Order marked as paid")})}return(s,a)=>(o(),w(V,null,{default:C(()=>[t("div",A,[a[1]||(a[1]=t("h1",{class:"text-2xl font-semibold mb-4"},"Orders",-1)),t("div",T,[t("table",U,[a[0]||(a[0]=t("thead",{class:"text-xs uppercase bg-gray-50 text-gray-700"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Order #"),t("th",{class:"px-4 py-3"},"Total"),t("th",{class:"px-4 py-3"},"Status"),t("th",{class:"px-4 py-3"},"Shipment"),t("th",{class:"px-4 py-3"},"Payment Action"),t("th",{class:"px-4 py-3"},"Add/Update Tracking")])],-1)),t("tbody",null,[(o(!0),r(p,null,u(d.orders.data,e=>(o(),r("tr",{key:e.id,class:"border-t"},[t("td",B,c(e.id),1),t("td",D,"RM "+c(e.total_price),1),t("td",O,c(e.status),1),t("td",P,[e.shipment?(o(),r("div",F,[t("div",null,[t("strong",null,c(e.shipment.courier_code),1)]),t("div",null,c(e.shipment.tracking_number),1),t("div",L,c(e.shipment.delivery_status??"unknown"),1)])):(o(),r("div",N,"No tracking yet"))]),t("td",$,[e.status==="unpaid"||e.status==="pending"?(o(),r("button",{key:0,class:"bg-green-600 text-white px-3 py-1 rounded text-xs",onClick:n=>g(e.id)}," Mark Paid ",8,j)):S("",!0)]),t("td",E,[t("div",H,[_(t("input",{"onUpdate:modelValue":n=>i[e.id].tracking_number=n,class:"border rounded px-2 py-1 w-44",placeholder:"tracking number",type:"text"},null,8,z),[[m,i[e.id].tracking_number]]),_(t("input",{"onUpdate:modelValue":n=>i[e.id].courier_code=n,class:"border rounded px-2 py-1 w-36",placeholder:"courier code",list:"courier-codes",type:"text"},null,8,R),[[m,i[e.id].courier_code]]),t("button",{class:"bg-blue-600 text-white px-3 py-1 rounded",onClick:n=>y(e.id)}," Save ",8,q)]),t("datalist",G,[(o(!0),r(p,null,u(l.value,n=>(o(),r("option",{key:n.code,value:n.code},c(n.name),9,J))),128))])])]))),128))])])]),t("div",K,[(o(!0),r(p,null,u(d.orders.links,e=>(o(),r("a",{key:e.url??e.label,href:e.url??"#",class:M(["px-3 py-1 rounded border text-sm",{"bg-gray-200 pointer-events-none":e.active,"text-gray-400 pointer-events-none":!e.url}]),innerHTML:e.label},null,10,Q))),128))])])]),_:1}))}};export{tt as default};
