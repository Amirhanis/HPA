import{j as m,c as v,w as S,o as r,e as t,b as i,l as g,m as $,D as C,t as l,F as h,d as _,k as D}from"./app-B3Hywhcu.js";import B from"./UserLayout-DB-WmwPy.js";import I from"./InvoiceModal-CQeEPMfM.js";import"./index-CJXH2dV6.js";import"./Header-CIy7ySJT.js";import"./Footer-D5xW66Ir.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"relative max-w-screen-xl py-24 mx-auto overflow-x-auto"},M={class:"text-xs text-gray-700 uppercase dark:bg-gray-700 dark:text-gray-400"},V={scope:"col",class:"px-6 py-3"},F={class:"px-6 py-4"},L={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},N={class:"px-6 py-4"},O={class:"px-6 py-4"},P={class:"px-6 py-4"},U={class:"px-6 py-4"},j=["onClick"],A={class:"px-6 py-4"},E=["onClick"],q={key:0,class:"text-xs text-gray-500 mt-1"},W={__name:"Dashboard",props:{orders:Array},setup(k){const c=m(null),p=m(!1),w=d=>{c.value=d,p.value=!0},b=()=>{p.value=!1,c.value=null},f=async d=>{var e,s,o,n;try{const a=await D.get(route("orders.tracking",d.id)),u=a.data.delivery_status??"unknown",y=a.data.latest_event??"",x=a.data.latest_checkpoint_time??"";(e=window.Swal)==null||e.fire({title:"Delivery Status",html:`
                <div style="text-align:left">
                    <div><strong>Status:</strong> ${u}</div>
                    ${y?`<div style="margin-top:6px"><strong>Latest event:</strong> ${y}</div>`:""}
                    ${x?`<div style="margin-top:6px"><strong>Time:</strong> ${x}</div>`:""}
                </div>
            `})}catch(a){const u=((o=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:o.message)??"Unable to load tracking. Tracking may not be added yet.";(n=window.Swal)==null||n.fire({title:"Tracking Unavailable",text:u,icon:"error"})}};return(d,e)=>(r(),v(B,null,{default:S(()=>[t("div",T,[(r(!0),i(h,null,g(k.orders,s=>$((r(),i("table",{key:s.id,class:"w-full text-sm text-left text-gray-500 dark:text-gray-400 mb-5"},[t("thead",M,[t("tr",null,[t("th",V,"Order ID # "+l(s.id),1),e[0]||(e[0]=t("th",{scope:"col",class:"px-6 py-3"},"Product",-1)),e[1]||(e[1]=t("th",{scope:"col",class:"px-6 py-3"},"Brand",-1)),e[2]||(e[2]=t("th",{scope:"col",class:"px-6 py-3"},"Category",-1)),e[3]||(e[3]=t("th",{scope:"col",class:"px-6 py-3"},"Price",-1)),e[4]||(e[4]=t("th",{scope:"col",class:"px-6 py-3"},"Invoice",-1)),e[5]||(e[5]=t("th",{scope:"col",class:"px-6 py-3"},"Shipment",-1))])]),t("tbody",null,[(r(!0),i(h,null,g(s.order_items,o=>{var n;return r(),i("tr",{key:o.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[t("td",F,l(o.id),1),t("th",L,l(o.product.title),1),t("td",N,l(o.product.brand.name),1),t("td",O,l(o.product.category.name),1),t("td",P,"$"+l(o.product.price),1),t("td",U,[t("button",{onClick:a=>w(s),class:"text-blue-600 hover:underline"},"View Invoice",8,j)]),t("td",A,[t("button",{onClick:a=>f(s),class:"text-blue-600 hover:underline"},"Track Shipment",8,E),(n=s.shipment)!=null&&n.delivery_status?(r(),i("div",q,l(s.shipment.delivery_status),1)):_("",!0)])])}),128))])])),[[C,s.order_items.length>0]])),128))]),c.value?(r(),v(I,{key:0,show:p.value,order:c.value,onClose:b},null,8,["show","order"])):_("",!0)]),_:1}))}};export{W as default};
